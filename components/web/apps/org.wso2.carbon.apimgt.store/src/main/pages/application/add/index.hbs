{{layout "main"}}
{{favicon "images/favicon.png" type="image/png"}}
{{title "Applications | " @config.appName}}
{{js "js/main.js"}}
{{js "js/left-navigation.js"}}
{{js "js/script.js"}}
{{js "js/common.js"}}
{{css "css/custom.css"}}
{{#fillZone "contentTop"}}
    <!-- navbar -->
    <div class="navbar-wrapper ">
        <nav class="navbar navbar-default" data-spy="affix" data-offset-top="50" data-offset-bottom="40">
            <a class="navbar-menu-toggle hidden-sm hidden-lg hidden-md" title="left-sidebar" data-toggle="sidebar" data-target="#left-sidebar" data-container=".page-content-wrapper" data-container-divide="true" aria-expanded="false" rel="leftmenu-sidebar">
                        <span class="icon fw-stack">
                            <i class="fw fw-menu fw-stack-1x toggle-icon-cancel"></i>
                        </span>
            </a>

            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div id="navbar" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">

                        <li>
                            <a title="Applications List" href="/store/application/">
                                   <span class="icon fw-stack">
	                                    <i class="fw fw-left fw-stack-1x"></i>
	                                    <i class="fw fw-circle-outline fw-stack-2x"></i>
	                                </span>
                                Application List
                            </a>
                        </li>
                    </ul>

                </div><!--/.nav-collapse -->
            </div>

        </nav>
    </div>

{{/fillZone}}
{{#fillZone "content"}}
    <div class="page-header" id="Message">
        <h2>Add Application</h2>
    </div>
    <p>An application is a logical collection of APIs. Applications allow you to use a single access token to invoke a collection of APIs and to subscribe to one API multiple times with different SLA levels. The DefaultApplication is pre-created and allows unlimited access by default.</p>

    <div class="alert alert-success" id="appAddMessage" style="display:none">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>Application<span id="applicationShowName"></span>Successfully added!</strong>
    </div>
    <div class="alert alert-success" id="appAddPendingMessage" style="display:none">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>Congratulations! Your application creation request for - <span id="applicationPendingShowName"></span> has been submitted and is now awaiting approval.</strong>
    </div>

    <br />
    <div class="white-wrapper add-padding-5x">
        <form class="form-horizontal" id="appAddForm">
            <input type="hidden" id="apiPath" value="<%=apiPath%>"/>
            <input type="hidden" id="goBack" value="<%= encode.forHtmlAttribute(goBack)%>"/>
            <div class="form-group">
                <label class="control-label col-md-3 col-lg-3" for="application-name">Name<span class="requiredAstrix">*</span></label>
                <div class="col-md-9 col-lg-9">
                    <input type="text" class="form-control required validateSpecialChars validName" title="Application Name" id="application-name" autofocus="autofocus"/>
                </div>
            </div>
            <div class="form-group">


                <label class="col-md-3 col-lg-3 control-label" for="appTier">Per Token Quota</label>

                <div class="col-md-9 col-lg-9">
                    <select id="appTier" name="appTier" onChange="tierChanged(this)">

                        <option  title="Unlimited" data-content="<span><strong>Unlimited</strong><br />Allows unlimited requests</span>" value="Unlimited" selected="selected">
                            Unlimited
                        </option>

                        <option  title="50PerMin" data-content="<span><strong>50PerMin</strong><br />Allows 50 request per minute</span>" value="50PerMin" >
                            50PerMin
                        </option>

                        <option  title="20PerMin" data-content="<span><strong>20PerMin</strong><br />Allows 20 request per minute</span>" value="20PerMin" >
                            20PerMin
                        </option>

                        <option  title="10PerMin" data-content="<span><strong>10PerMin</strong><br />Allows 10 request per minute</span>" value="10PerMin" >
                            10PerMin
                        </option>

                    </select>
                    <div id="tierHelpStr" class="help-block" style="padding-left: 10px; display: inline;">
                        <em>unlimitedTierDesc</em>
                    </div>
                    <div class="help-block"> This feature allows you to assign an API request quota per access token. Allocated quota will be shared among all the subscribed APIs of the application.</div>
                    <input type="hidden"  id="tierDescriptions" name="tierDescriptions" value=""/>
                </div>
            </div>
            <div class="form-group">
                <label for="description" class="col-md-3 col-lg-3 control-label">Description</label>
                <div class="col-md-9 col-lg-9">
                    <textarea id="description"  class="form-control" type="text" rows="3"></textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-3 col-sm-9">
                    <input type="submit" id="application-add-button" class="btn btn-primary" onclick="jagg.sessionAwareJS
        ({redirect:'/site/pages/applications.jag'})" value="Add"/>
                    <a title=Cancel" href="/store/application" class="btn btn-default">Cancel</a>
                </div>
            </div>
        </form>
    </div>

{{/fillZone}}